<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>IC In-Class Assignment - Puzzle</title>

<style>
	body {margin:0px; padding:0px; background-color:white; overflow:hidden;}
	#myCanvas {position:absolute; left:0px; top:0px; background-color:white;}
</style>

<script src=" https://code.createjs.com/createjs-2015.11.26.min.js"></script>
<script src="http://d309knd7es5f10.cloudfront.net/zim_2.6.1.js"></script>
<script src="http://d309knd7es5f10.cloudfront.net/zim_2.6.1_doc.js"></script>


<script>

window.addEventListener("load", function() {

	var stageW;
	var stageH;
	var ready = false;
	var resize;
	var orientation;

	makeCanvas();

	var stage = new createjs.Stage("myCanvas");
	stage.enableMouseOver(10);  // leave out if mobile
	createjs.Touch.enable(stage, true);
	sizeStage();

	// end template header
	//------------------------------------------
	 var totalCircles = 7;
	 var circleColor = "#e74c3c";
	 var size = (stageH/totalCircles)/2;
	 var posY = size;

	 var counter = 50;
	 var textCountdown = new createjs.Text("" + counter, "20px Arial", "white"); 
	 stage.addChild(textCountdown);
	 textCountdown.x = stageW - 30;
	 textCountdown.y = stageH -30;
	 var circles = new createjs.Container();
	 stage.addChild(circles);


	
	// red circle
	var container = new zim.Circle (50, "#F3994D", null, null);
    stage.addChild(container);
    container.x = 200;
    container.y = 200;
    
    var circle = new zim.Circle(40, "yellow", null, null);
	circle.x = 200;
	circle.y = 40;
	stage.addChildAt(circle, 3);
	
    
    // yellow circle
    var container2 = new zim.Circle (50, "#FFE401", null, null);
    // bigContainer.addChildAt(container2, 1);
    container2.x = 500;
    container2.y = 160;
    stage.addChild(container2);
    stage.update();
    
    // faded green container
    var container10 = new zim.Circle (50, "#CCD755", null, null);
    container10.x = 700;
    container10.y = 160;
    stage.addChild(container10);
    stage.update();
    
    
    var circle2 = new zim.Circle(40, "yellow", null, null);
	circle.x = 100;
	circle.y = 40;
	// bigContainer.addChildAt(circle2, 0);

	
	// blueish
    var container3 = new zim.Circle (50, "#67BCB7", null, null);
    stage.addChild(container3);
    container3.x = 450;
    container3.y = 40;
    stage.update();

	//darker blue
    var container4 = new zim.Circle (50, "#2C89C6", null, null);
    stage.addChild(container4);
    container4.x = 630;
    container4.y = 160;
    stage.update();

	// purple
    var container5 = new zim.Circle (50, "#9E6CA7", null, null);
    stage.addChild(container5);
    container5.x = 220;
    container5.y = 450;
    stage.update();
    
    // pink
    var container6 = new zim.Circle (50, "#E86392", null, null);
    stage.addChild(container6);
    container6.x = 220;
    container6.y = 450;
    stage.update();

   
    
    var container20 = new zim.Rectangle (100, 100, "purple", null, null, 10);
    // bigContainer.addChildAt (container20, 0);
    container3.x = 450;
    container3.y = 40;
    stage.update();

    var container7 = new zim.Rectangle (100, 100, "black", null, null, 10);
    // bigContainer.addChildAt(container7, 1);
    container7.x = 630;
    container7.y = 450;
    stage.update();

    var container8 = new zim.Rectangle (100, 100, "pink", null, null, 10);
    // bigContainer.addChildAt(container8, 1);
    container8.x = 810;
    container8.y = 40;
    stage.update();

    var container9 = new zim.Rectangle (100, 100, "purple", null, null, 10);
    // bigContainer.addChildAt(container9, 1);
    container9.x = 810;
    container9.y = 550;
    stage.update();
	 
	zim.drag(circle);
	
	if (zim.hitTestBounds = (circle, container9)) { 
		console.log("hitting");
		
		stage.update();
	}
	
	
	if (zim.hitTestCircle(circle, container3, 3)){
		console.log("hitting");
		//myCircle.alpha = 0;
		//stage.removeChild(myCircle);
		circle.x = -2000;
		
		stage.update();
	}
	
	
	var mySquare = new zim.Rectangle(50, 50, "black", null, null, 10);
	stage.addChild(mySquare);
	
	
	var mySquare2 = new zim.Rectangle(50, 50, "blue", null, null, 10);
	
	
	var mySquare3 = new zim.Rectangle(50, 50, "red", null, null, 10);
	
	
	var mySquare4 = new zim.Rectangle(50, 50, "yellow", null, null, 10);
	
	
	var mySquare5 = new zim.Rectangle(50, 50, "pink", null, null, 10);
	
	
	var mySquare6 = new zim.Rectangle(50, 50, "purple", null, null, 10);
	
	
	var mySquare7 = new zim.Rectangle(50, 50, "gray", null, null, 10);
	// stage.addChild(mySquare7)
	
	var mySquare8 = new zim.Rectangle(50, 50, "green", null, null, 10);
	// stage.addChild(mySquare8)
	
	var mySquare9 = new zim.Rectangle(50, 50, "tomato", null, null, 10);
	// stage.addChild(mySquare9)
	
	stage.update();
	
	
	
	var myCircle = new zim.Circle(40, "orange");
	stage.addChild(myCircle)
	
	var myCircle2 = new zim.Circle(40, "purple");
	stage.addChild(myCircle2)
	myCircle2.x = 500;
	myCircle2.y = 400;
	
	zim.drag(myCircle);
	zim.dragRect(mySquare);
	
	myCircle.x = stageW / 2;
	myCircle.y = stageH / 2;
	
	zim.drag(mySquare);
	zim.drag(mySquare2);
	zim.drag(mySquare6);
	zim.drag(mySquare3);
	zim.drag(mySquare4);
	zim.drag(mySquare5);
	
	
	// if (zim.hitTestCircle(mySquare, myCircle, 8)){
// 		console.log("hitting");
// 		//myCircle.alpha = 0;
// 		//stage.removeChild(myCircle);
// 		myCircle.x = -2000;
// 		
// 		stage.update();
// 	}
	
	mySquare.on("pressmove", function() {
	console.log ("dragging");


	if (zim.hitTestCircle(mySquare, myCircle, 8)){
		console.log("hitting");
		//myCircle.alpha = 0;
		//stage.removeChild(myCircle);
		myCircle.x = -2000;
		stage.update();
	}
	
var squarelist = [mySquare2, mySquare3];
var circlelist = [container, container2]; 



// for (i=0;i<9;i++){
// 
// 	var squarelist = [mySquare2, mySquare3];
// 	var circlelist = [container, container2]; 
//     var rand = Math.floor(Math.random()*squarelist.length);
//     var rand2 = Math.floor(Math.random()*squarelist.length);
//     eval(circlelist[rand]).addChild(eval(squarelist[rand2]));
//     circlelist.splice(rand, 1);
//     squarelist.splice(rand2, 1);
//     
//     stage.update();
// 	
// 	
// 	var mySquare2 = new zim.Rectangle(50, 50, "blue", null, null, 10);
//       
//       createjs.Tween.get(square2)
//             .to({
//               y: 100,
//               x: 500
//             }, 400)
//       
// 
// }
// setTimeout(function(){
//       
//       createjs.Tween.get(square2)
//             .to({
//               y: 100,
//               x: 500
//             }, 400)
//       
//     }, 4000);





	stage.update();
});
	
	
	
	
	
	
	
	
	
	
	 var score = 0;
	 var scoreArray = [];
	 

	 circles.on("click", function(e){
	 	console.log("Distance: " + e.target.distance);
	 	createjs.Tween.get(e.target) 
	 		.to({x:e.target.distance},1000)
	 		.to({x:size}, 500);
	 	
	 	if(scoreArray.length == 0) {
	 		scoreArray.push(e.target.distance);
	 		score += 1;
	 	} 

	 	else if (scoreArray[scoreArray.length - 1] < e.target.distance) {
	 		scoreArray.push(e.target.distance);
	 		score += 1;
	 	} else { 
	 		scoreArray = [];
			score = 0;
	 		scoreArray.push(e.target.distance);
	 		score += 1;
	 	}

	 	if (score >= totalCircles) { 
	 		alert("You Win");
	 		location.reload();
	 	}

	 	counter -= 1;
	 	if (counter == 0) {
	 		alert("GAME OVER!");
	 		location.reload();
	 	}

	 	console.log("Array Total: " + scoreArray);
	 	console.log("Score: " + score);
	 	console.log("Counter: " + counter);

	 	textCountdown.text = "" + counter;

	 	stage.update();
	 });

	var listener = createjs.Ticker.on("tick", stage);

	resize = function() {
		// here is where we put code to resize

		stage.update();
	}

	stage.update();
	ready = true;

	// ----------------------------------------------
	// start template footer
	function makeCanvas() {
		// make a canvas tag and apply attributes for id, width and height
		var canvas = document.createElement("canvas");
		canvas.setAttribute("id", "myCanvas");

		// get maximum size for canvas
		// note: iOS6 does not work from loading icon unless keep canvas within device size
		// thank you apple for this and many other days of hell
		largest = Math.max(window.innerWidth, screen.width, window.innerHeight, screen.height);
		if (!/ip(hone|od|ad)/i.test(navigator.userAgent)) largest *= 3; // handle up to three monitors
		canvas.setAttribute("width", largest);
		canvas.setAttribute("height", largest);

		// add our canvas tag
		document.body.appendChild(canvas);

		// stop the canvas from moving when certain keys are pressed (pgdwn, pgup, arrows, home, end)
		// and stop scrollwheel from moving page
		var a = function(e) {
			if (!e) e = event;
			if (e.keyCode && (e.keyCode >= 32 && e.keyCode <= 40)) e.preventDefault();
		}
		var b = function(e) {
			if (!e) e = event;
			e.preventDefault();
		}
		var c = b;
		window.addEventListener("keydown", a);
		window.addEventListener("mousewheel", b);
		window.addEventListener("DOMMouseScroll", c);
		window.addEventListener('resize', function() {
			sizeStage();
			if (/android|nexus/i.test(navigator.userAgent)) {
				setTimeout(function() {
					sizeStage();
				}, 500); // to catch delayed screen sizes
			}
		});
	}

	function sizeStage() {
		// earlier than IE9 does not have innerWidth
		// inner is better on mobile when zoomed so can't always use client
		// ternary operator
		stageW = isNaN(window.innerWidth) ? window.clientWidth : window.innerWidth;
		stageH = isNaN(window.innerHeight) ? window.clientHeight : window.innerHeight;

		// if wider than high then we have horizontal (or landscape)
		orientation = (stageW>stageH) ? "horizontal" : "vertical";

		if (stage) stage.setBounds(0,0,stageW,stageH);
		if (ready) resize();
	}
});

</script>
</head>
<body>
</body>
</html>
